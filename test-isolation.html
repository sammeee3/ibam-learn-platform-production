<!DOCTYPE html>
<html>
<head>
    <title>Database Isolation Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .test-section { background: #f5f5f5; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .production { border-left: 5px solid #ff6b6b; }
        .staging { border-left: 5px solid #4ecdc4; }
        .result { background: white; padding: 10px; margin: 10px 0; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>üîç Database Isolation Verification Test</h1>
    
    <div class="test-section production">
        <h2>üî¥ Production Database Test</h2>
        <p><strong>URL:</strong> https://ibam-learn-platform-v3.vercel.app</p>
        <button onclick="testProduction()">Test Production Database</button>
        <div id="prodResult" class="result">Click to test...</div>
    </div>
    
    <div class="test-section staging">
        <h2>üîµ Staging Database Test</h2>
        <p><strong>URL:</strong> https://ibam-learn-platform-staging-v2-1k0mdne9l.vercel.app</p>
        <button onclick="testStaging()">Test Staging Database</button>
        <div id="stagingResult" class="result">Click to test...</div>
    </div>
    
    <div class="test-section">
        <h2>‚úÖ Expected Results</h2>
        <p><strong>Production:</strong> Should show existing user data (like sammeee@yahoo.com)</p>
        <p><strong>Staging:</strong> Should show empty database or error (no users exist)</p>
        <p><strong>Proof of Isolation:</strong> Different responses = Different databases!</p>
    </div>

    <script>
        async function testProduction() {
            const resultDiv = document.getElementById('prodResult');
            resultDiv.innerHTML = 'Testing production database...';
            
            try {
                const response = await fetch('https://ibam-learn-platform-v3.vercel.app/api/auth/sso?email=sammeee@yahoo.com&token=ibam-systeme-secret-2025', {
                    mode: 'no-cors'
                });
                resultDiv.innerHTML = '‚úÖ Production: Request sent (should work if user exists)';
            } catch (error) {
                resultDiv.innerHTML = '‚úÖ Production: ' + error.message;
            }
        }
        
        async function testStaging() {
            const resultDiv = document.getElementById('stagingResult');
            resultDiv.innerHTML = 'Testing staging database...';
            
            try {
                const response = await fetch('https://ibam-learn-platform-staging-v2-1k0mdne9l.vercel.app/api/auth/sso?email=sammeee@yahoo.com&token=ibam-systeme-secret-2025', {
                    mode: 'no-cors'
                });
                resultDiv.innerHTML = '‚úÖ Staging: Request sent (should fail - user does not exist in staging)';
            } catch (error) {
                resultDiv.innerHTML = '‚úÖ Staging: ' + error.message;
            }
        }
    </script>
</body>
</html>